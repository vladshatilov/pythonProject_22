В задании представлена одна большая функция... 
Делает она всего ничего:
- читает из строки (файла)
- сортирует прочитанные значения
- фильтрует итоговый результат

Конечно, вы можете попробовать разобраться как она это делает, но мы бы советовали разнести функционал по более узким функциям и написать их с нуля